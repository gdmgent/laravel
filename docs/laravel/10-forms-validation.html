<!DOCTYPE html>
<html lang="nl-BE">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Formulieren | Framework Development &amp; Laravel</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link href="https://www.gdm.gent/vuepress-theme-artevelde/favicon.svg" rel="icon">
    <meta name="description" content="Advanced Development with PHP &amp; MVC with Laravel">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    
    <link rel="preload" href="/laravel/assets/css/0.styles.0244fdd9.css" as="style"><link rel="preload" href="/laravel/assets/js/app.c800e37d.js" as="script"><link rel="preload" href="/laravel/assets/js/2.7ca25b29.js" as="script"><link rel="preload" href="/laravel/assets/js/43.dc8f5407.js" as="script"><link rel="preload" href="/laravel/assets/js/5.861211ff.js" as="script"><link rel="preload" href="/laravel/assets/js/20.21de2408.js" as="script"><link rel="preload" href="/laravel/assets/js/3.19667c3e.js" as="script"><link rel="prefetch" href="/laravel/assets/js/10.5e9ac10c.js"><link rel="prefetch" href="/laravel/assets/js/11.da89dc38.js"><link rel="prefetch" href="/laravel/assets/js/12.f75538b0.js"><link rel="prefetch" href="/laravel/assets/js/13.f6363d8f.js"><link rel="prefetch" href="/laravel/assets/js/14.c14346fa.js"><link rel="prefetch" href="/laravel/assets/js/15.fc4a971d.js"><link rel="prefetch" href="/laravel/assets/js/16.7a52b460.js"><link rel="prefetch" href="/laravel/assets/js/17.3743a231.js"><link rel="prefetch" href="/laravel/assets/js/18.e103b0bd.js"><link rel="prefetch" href="/laravel/assets/js/19.0db8ae57.js"><link rel="prefetch" href="/laravel/assets/js/21.8d175336.js"><link rel="prefetch" href="/laravel/assets/js/22.81430f94.js"><link rel="prefetch" href="/laravel/assets/js/23.19310e90.js"><link rel="prefetch" href="/laravel/assets/js/24.b5a983f1.js"><link rel="prefetch" href="/laravel/assets/js/25.2a38243c.js"><link rel="prefetch" href="/laravel/assets/js/26.78e6f579.js"><link rel="prefetch" href="/laravel/assets/js/27.ccd3af6e.js"><link rel="prefetch" href="/laravel/assets/js/28.a534a0aa.js"><link rel="prefetch" href="/laravel/assets/js/29.9cecd0e1.js"><link rel="prefetch" href="/laravel/assets/js/30.e520cd2c.js"><link rel="prefetch" href="/laravel/assets/js/31.d4cbc49c.js"><link rel="prefetch" href="/laravel/assets/js/32.a8dfbe4b.js"><link rel="prefetch" href="/laravel/assets/js/33.5001daca.js"><link rel="prefetch" href="/laravel/assets/js/34.2aaa4d09.js"><link rel="prefetch" href="/laravel/assets/js/35.f8ae61fa.js"><link rel="prefetch" href="/laravel/assets/js/36.908737f4.js"><link rel="prefetch" href="/laravel/assets/js/37.849da9fd.js"><link rel="prefetch" href="/laravel/assets/js/38.e130d80e.js"><link rel="prefetch" href="/laravel/assets/js/39.965188a6.js"><link rel="prefetch" href="/laravel/assets/js/4.9b20a6cc.js"><link rel="prefetch" href="/laravel/assets/js/40.b1a96754.js"><link rel="prefetch" href="/laravel/assets/js/41.758e3f79.js"><link rel="prefetch" href="/laravel/assets/js/42.fc8a427f.js"><link rel="prefetch" href="/laravel/assets/js/44.266a16f2.js"><link rel="prefetch" href="/laravel/assets/js/45.c2c914bb.js"><link rel="prefetch" href="/laravel/assets/js/46.f6f279c0.js"><link rel="prefetch" href="/laravel/assets/js/47.fcef58b1.js"><link rel="prefetch" href="/laravel/assets/js/48.67cf3035.js"><link rel="prefetch" href="/laravel/assets/js/49.d1cc6dde.js"><link rel="prefetch" href="/laravel/assets/js/50.8eb56855.js"><link rel="prefetch" href="/laravel/assets/js/6.77d8c133.js"><link rel="prefetch" href="/laravel/assets/js/7.e7c0de10.js"><link rel="prefetch" href="/laravel/assets/js/8.22bf2da1.js"><link rel="prefetch" href="/laravel/assets/js/9.e67ff90f.js">
    <link rel="stylesheet" href="/laravel/assets/css/0.styles.0244fdd9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="navbar-item"><div class="sidebar-button"><svg fill="currentColor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg" class="sidebar-icon sidebar-closing-icon"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"></path> <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"></path></svg> <svg fill="currentColor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg" class="sidebar-icon sidebar-opening-icon"><path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path></svg></div></div> <a href="/laravel/" class="navbar-item home-link router-link-active"><img src="https://www.gdm.gent/vuepress-theme-artevelde/artevelde__icon--white.svg" alt="Framework Development &amp; Laravel" class="logo"> <span class="site-name">Framework Development &amp; Laravel</span></a> <div class="search-box navbar-item"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links navbar-item can-hide"><div class="nav-item"><a href="/laravel/concepts/" class="nav-link">Basisconcepten</a></div><div class="nav-item"><a href="/laravel/laravel/" class="nav-link router-link-active">Laravel</a></div><div class="nav-item"><a href="/laravel/mailing/" class="nav-link">Mailing</a></div><div class="nav-item"><a href="/laravel/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Taal</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/laravel/laravel/10-forms-validation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Nederlands</a></li><li class="dropdown-item"><!----> <a href="/laravel/en/" class="nav-link">English</a></li></ul></div></div> <!----> <!----></nav></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/laravel/concepts/" class="nav-link">Basisconcepten</a></div><div class="nav-item"><a href="/laravel/laravel/" class="nav-link router-link-active">Laravel</a></div><div class="nav-item"><a href="/laravel/mailing/" class="nav-link">Mailing</a></div><div class="nav-item"><a href="/laravel/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Taal</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/laravel/laravel/10-forms-validation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Nederlands</a></li><li class="dropdown-item"><!----> <a href="/laravel/en/" class="nav-link">English</a></li></ul></div></div> <!----> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/laravel/laravel/" class="router-link-active sidebar-heading clickable open"><span>Laravel MVC Framework</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel/laravel/01-frameworks.html" class="sidebar-link">PHP Frameworks</a></li><li><a href="/laravel/laravel/02-installation.html" class="sidebar-link">Installatie</a></li><li><a href="/laravel/laravel/03-mvc.html" class="sidebar-link">Model View Controller</a></li><li><a href="/laravel/laravel/04-asset-linking.html" class="sidebar-link">Linking assets</a></li><li><a href="/laravel/laravel/05-database-migrations.html" class="sidebar-link">Migrations</a></li><li><a href="/laravel/laravel/06-relations.html" class="sidebar-link">Relaties</a></li><li><a href="/laravel/laravel/07-storage.html" class="sidebar-link">File Storage</a></li><li><a href="/laravel/laravel/08-authentication.html" class="sidebar-link">Authenticatie</a></li><li><a href="/laravel/laravel/09-eloquent.html" class="sidebar-link">CRUD via Eloquent ORM</a></li><li><a href="/laravel/laravel/10-forms-validation.html" aria-current="page" class="active sidebar-link">Formulieren</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#csrf-cross-site-request-forgery" class="sidebar-link">CSRF: Cross Site Request Forgery</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#editeren" class="sidebar-link">Editeren</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#stap-1-maak-een-template-aan" class="sidebar-link">Stap 1: Maak een template aan</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#stap-2-routes-aanmaken" class="sidebar-link">Stap 2: Routes aanmaken.</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#stap-3-de-methods-aanmaken" class="sidebar-link">Stap 3: De methods aanmaken</a></li></ul></li><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#aanmaken" class="sidebar-link">Aanmaken</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#form-validatie" class="sidebar-link">Form validatie</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#een-op-veel-relatie" class="sidebar-link">Een-op-veel relatie</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#veel-op-veel-relatie" class="sidebar-link">Veel-op-veel relatie</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel/laravel/10-forms-validation.html#sync-veel-op-veel" class="sidebar-link">Sync veel-op-veel</a></li></ul></li></ul></li><li><a href="/laravel/laravel/11-localization.html" class="sidebar-link">Localization</a></li><li><a href="/laravel/laravel/12-api.html" class="sidebar-link">API</a></li><li><a href="/laravel/laravel/13-cheatsheet.html" class="sidebar-link">Cheat Sheet</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="formulieren"><a href="#formulieren" class="header-anchor">#</a> Formulieren</h1> <p>We kunnen nu ook templates maken waarin formulier voorkomen. We gaan er vanuit gaan dat, indien we gegevens willen ophalen, we best de GET methode gebruiken. En als we gegevens naar de database willen sturen de POST van toepassing is. Uiteraard zijn er steeds uitzonderingen op deze regel. Hieronder gaan we verder in op het versturen van gegevens die in de database zullen worden opgeslagen en dus de POST methode zal gebruikt worden.</p> <h2 id="csrf-cross-site-request-forgery"><a href="#csrf-cross-site-request-forgery" class="header-anchor">#</a> CSRF: Cross Site Request Forgery</h2> <p>Om je te wapenen tegen CSRF heeft Laravel een middleware voorzien om de request te controleren op de oorsprong van de request.</p> <p>Bij het aanmaken van een formulier moet je dan wel een include doen via <code>@csrf</code>. Dit zal een soort sessie ID meegeven als hidden input in je formulier. Hierop zal Laravel dan controleren of de request wel degelijk van je eigen website komt en niet van een externe (fishing) website.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;form method=&quot;POST&quot;&gt;
    @csrf
&lt;/form&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="editeren"><a href="#editeren" class="header-anchor">#</a> Editeren</h2> <h3 id="stap-1-maak-een-template-aan"><a href="#stap-1-maak-een-template-aan" class="header-anchor">#</a> Stap 1: Maak een template aan</h3> <p>Deze template voorzie je van een formulier om de content aan te passen. <strong>(Vergeet de csrf niet)</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@section('content')
&lt;h1&gt;Edit Project&lt;/h1&gt;
&lt;form method=&quot;POST&quot;&gt;
    @csrf
    &lt;label&gt;    
        Name:
        &lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;{{ $project-&gt;name }}&quot;&gt;
    &lt;/label&gt;

    &lt;label&gt;    
        Description:
        &lt;textarea name=&quot;description&quot;&gt;{!! $project-&gt;description !!}&lt;/textarea&gt;
    &lt;/label&gt;

    &lt;button type=&quot;submit&quot;&gt;Aanpassen&lt;/button&gt;
&lt;/form&gt;
@endsection
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="stap-2-routes-aanmaken"><a href="#stap-2-routes-aanmaken" class="header-anchor">#</a> Stap 2: Routes aanmaken.</h3> <p>Zoals je hieronder kan zien maak ik zowel een <code>get</code> als <code>post</code> route aan. Elk verwijzen ze naar een andere method binnen de ProjectConroller.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Route::get('/project/{id}/edit', [ProjectController::class, 'edit']);
Route::post('/project/{id}/edit', [ProjectController::class, 'save']);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="stap-3-de-methods-aanmaken"><a href="#stap-3-de-methods-aanmaken" class="header-anchor">#</a> Stap 3: De methods aanmaken</h3> <p>Maak onderstaande methods aan in de <code>ProjectController</code> class. Pas de waardes aan van je object en gebruik de <code>save()</code> method, van ons ORM, om de aanpassingen op te slaan in de database.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public function edit($id) {
    $project = Project::findOrFail($id);

    return view('project.edit', [
        'project' =&gt; $project
    ]);
}

public function save(Request $request, $id) {
    $project = Project::findOrFail($id);

    //Eventueel extra server side validatie toevoegen
    $project-&gt;name = $request-&gt;input('name');
    $project-&gt;description = $request-&gt;input('description');
    $success = $project-&gt;save();

    if($success) {    
        return redirect('/project/' . $project-&gt;id);   
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="aanmaken"><a href="#aanmaken" class="header-anchor">#</a> Aanmaken</h2> <p>We zouden nu zowel de template als de methods kunnen dupliceren voor het aanmaken van een nieuw record. Maar zoals het een goede programmeur betaamt, zijn we wat ‘lui’, en willen we zoveel mogelijk code hergebruiken. Het grootste verschil tussen aanpassen en editeren is dat we bij het aanpassen, eerst een project ophalen uit de database en bij het aanmaken, een nieuw leeg object initialiseren.</p> <p>Eerst en vooral moeten we ervoor zorgen dat we nieuwe routes aanmaken <code>/project/create</code>. En dat we deze ook doorverwijzen naar de edit en save methods van de controller.</p> <blockquote><p><strong>Let hierbij op dat deze boven de routes staan van <code>/project/{id}</code> anders zal hij ‘create’ aanzien als een id dat doorgegeven moet worden naar de detail controller.</strong></p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>Route::get('/project/create', [ProjectController::class, 'edit']);
Route::post('/project/create', [ProjectController::class, 'save']);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Als je dit gaat testen zal je zien dat dit de foutmelding <code>Too few arguments to function</code> zal genereren. Dit kunnen we oplossen door een standaard waarde te geven aan de <code>$id</code> parameter bij de edit method. Daarna moeten we dan ook controleren op deze <code>$id</code>. Indien deze niet is meegegeven dient er een nieuw object te worden aangemaakt van die class.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public function edit($id = null) {
    $project = ($id) ? Project::findOrFail($id) : new Project();

    ...
}

public function save(Request $request, $id = null) {
    $project = ($id) ? Project::findOrFail($id) : new Project();

    ...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Je kan er nu ook voor zorgen dat er, bij de creatie van een project, een duidelijkere tekst staat bij de titel (<em>‘Create project’</em>) en submit knop (<em>‘Add project’</em>).</p> <p>Gebruik hiervoor dezelfde verkorte schrijfwijze voor een if-then-else statement.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;h1&gt;{{ ($project-&gt;id) ? 'Edit project' : 'Create project' }}&lt;/h1&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Deze labels staan nu steeds in het Engels, je kan er voor zorgen dat deze labels afhankelijk van de taalvoorkeur van de bezoeker aangepast worden. Dit gebeurt adhv lokalisatie. (Zie 9_Localisation.md)</p> <h2 id="form-validatie"><a href="#form-validatie" class="header-anchor">#</a> Form validatie</h2> <p>Naast het beveiligen tegen hacking moeten we er ook steeds voor zorgen dat onze database op een correcte manier en met geldige data wordt ingevuld.</p> <p>Dit moet zowel client- als serverside gevalideerd worden om de gebruiksvriedelijkheid (UX) van onze applicatie te optimaliseren.</p> <p>Clientside zal dit gebeuren door enerzijds de juiste input-types. Bijvoorbeeld <code>&lt;input type=&quot;email&quot;&gt;</code> voor een e-mail adres. En dat er een <code>required</code> attribuut wordt meegegeven indien de gebruiker verplicht het veld moet invullen. Of het aantal karakters beperken via het <code>maxlength</code> attribuut. Daarenboven kan je ook validatie doen via JavaScript vooraleer deze doorgestuurd wordt naar de server.</p> <p>Daarnaast is er niets zo vervelend als een database met bijvoorbeeld telefoonnummers waarbij 10 verschillende notaties worden aangenomen door gebruikers. (Met of zonder landcode, geschreven als +32 of 0032, de ene met spaties de andere met dots en nog andere met een slash tussenin.) Meestal kies je voor een bepaalde notatie en wil je dat dit consistent is voor alle records. Echter zal de gebruiker dat niet standaard doen.</p> <p>Een oplossing hiervoor is het gebruik van een mask, om de gebruiker te begeleiden in het invullen van een formulier. Bv bij rijksregister nummer <code>data-mask=&quot;99.99.99-999.99&quot;</code>. Dit zorgt er voor dat alle gebruiker steeds in dezelfde vorm het rijksregister nummer zullen ingeven. Dit kan echter nog niet via standaard HTML en moet je een JavaScript library toevoegen.</p> <p>Eens alles door de front-end op een correcte manier werd gevalideerd zal het formulier (via de POST) doorgestuurd worden naar de server. Nu is het aan onze controller om de data te valideren.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?php
 
namespace App\Http\Controllers;
 
use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;
 
class ProjectController extends Controller
{
    public function save(Request $request, $id = null)
    {
        $validator = Validator::make($request-&gt;all(), [
            'name' =&gt; 'required|max:50',
            'description' =&gt; 'required',
            'image' =&gt; 'max:10240', //=10MB Dit moet uiteraard overeenkomen met je php.ini &gt; upload_max_filesize
        ]);
 
        if ($validator-&gt;fails()) {
            return back()
                    -&gt;withErrors($validator)
                    -&gt;withInput();
        }
 
        // Retrieve the validated input...
        $validated = $validator-&gt;validated();
 
        ...
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><a href="https://laravel.com/docs/9.x/validation" target="_blank" rel="noopener noreferrer">Een volledig overzicht van Form validation.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="een-op-veel-relatie"><a href="#een-op-veel-relatie" class="header-anchor">#</a> Een-op-veel relatie</h2> <p>Indien er een een-op-veel relatie ligt tussen verschillende tabellen. Is het niet zo moeilijk om deze relatie tot stand te brengen in de database. We moeten enkel de primary key (PK) van de andere tabel opslaan als foreign key (FK) in de huidige tabel.</p> <p>Meestal zal je hiervoor gebruik maken in je formulier van een <code>&lt;select&gt;</code> input.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;label&gt;    
    Customer:
    &lt;select name=&quot;customer_id&quot;&gt;
        &lt;option value=&quot;&quot;&gt;{{ __('Select customer...')__ }}&lt;/option&gt;
    @foreach($customers as $customer)
        &lt;option value=&quot;{{ $customer-&gt;id }}&quot; {{ ($project-&gt;customer_id == $customer-&gt;id) ? 'selected' : '' }}&gt;{{ $customer-&gt;name }}&lt;/option&gt;
    @endforeach
    &lt;/select&gt;
&lt;/label&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="veel-op-veel-relatie"><a href="#veel-op-veel-relatie" class="header-anchor">#</a> Veel-op-veel relatie</h2> <p>Bij een veel op veel relatie kan je ook een <code>select</code> gebruiken met het attribuut <code>multiple</code>. Maar dit is niet zo gebruiksvriendelijk. Een betere optie is om checkboxen te voorzien.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;p&gt;
Users:
@foreach($users as $user)
    @php $is_selected = ($project-&gt;users-&gt;contains('id', $user-&gt;id)) ? 'checked' : ''; @endphp
    &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;users[]&quot; value=&quot;{{ $user-&gt;id }}&quot; {{ $is_selected }}&gt; {{ $user-&gt;name }}&lt;/label&gt;
@endforeach
&lt;/p&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Merk op dat de er vierkante haakjes staan in de name van de checkbox. De waardes van de aangevinkte checkboxes zullen als array verstuurd worden naar de server en kunnen opgehaald worden aan de hand van de key <code>users</code> (dus zonder vierkante haakjes).</p> <blockquote><p>Zijn er te veel records om allemaal een checkbox van te maken. Dan kan je ook een JavaScript library installeren dat een autocomplete select maakt waarbij je meerdere waardes / tags kan opgeven. Deze worden dan aangevuld via AJAX en een API binnen je applicatie.
<a href="https://github.com/topics/select-multiple?l=javascript&amp;o=desc&amp;s=" target="_blank" rel="noopener noreferrer">Voorbeeld JS libraries via GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="sync-veel-op-veel"><a href="#sync-veel-op-veel" class="header-anchor">#</a> Sync veel-op-veel</h3> <p>Hieronder zie je hoe je de synchronisatie van de tussen-tabel moet doen. Dit doe je aan de hand van de method <code>sync</code>. Nieuwe id’s zullen toegevoegd worden, ontbrekende zullen verwijderd worden.</p> <blockquote><p>Let wel op dat dit, bij nieuwe projecten, gebeurt nadat je het project hebt opgeslagen. Anders kan de relatie niet gemaakt worden omdat de <code>$project-&gt;id</code> nog niet toegekend is.</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>public function save(Request $request, $id = null) {
    ...

    $success = $project-&gt;save();

    //Veel-op-veel relatie synchroniseren
    $project-&gt;users()-&gt;sync($request-&gt;input('users'));
    
    ... 
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div> <div class="page-nav"><div class="inner"><a href="/laravel/laravel/09-eloquent.html" class="btn btn-left" data-v-3bc6a301><svg fill="currentColor" class="icon bi" data-v-6414aa66 data-v-3bc6a301><use xlink:href="/laravel/assets/img/bootstrap-icons.56d35f89.svg#arrow-left" data-v-6414aa66></use></svg> CRUD via Eloquent ORM <!----></a> <a href="/laravel/laravel/11-localization.html" class="btn btn-right" data-v-3bc6a301><!----> Localization <svg fill="currentColor" class="icon bi" data-v-6414aa66 data-v-3bc6a301><use xlink:href="/laravel/assets/img/bootstrap-icons.56d35f89.svg#arrow-right" data-v-6414aa66></use></svg></a></div></div> <footer class="page-edit"><span class="copyright">© 2023 Arteveldehogeschool</span> <span class="last-updated"><span class="prefix">Laatst bijgewerkt:</span> <span class="time">2023-1-31 10:27:16</span></span> <!----></footer> </main></div><div class="global-ui"></div></div>
    <script src="/laravel/assets/js/app.c800e37d.js" defer></script><script src="/laravel/assets/js/2.7ca25b29.js" defer></script><script src="/laravel/assets/js/43.dc8f5407.js" defer></script><script src="/laravel/assets/js/5.861211ff.js" defer></script><script src="/laravel/assets/js/20.21de2408.js" defer></script><script src="/laravel/assets/js/3.19667c3e.js" defer></script>
  </body>
</html>
