<!DOCTYPE html>
<html lang="nl-BE">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Querying data | Advanced Development &amp; Laravel</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link href="https://www.gdm.gent/vuepress-theme-artevelde/favicon.svg" rel="icon">
    <meta name="description" content="Advanced Development with PHP &amp; MVC with Laravel">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    
    <link rel="preload" href="/laravel/assets/css/0.styles.927314a7.css" as="style"><link rel="preload" href="/laravel/assets/js/app.1385f630.js" as="script"><link rel="preload" href="/laravel/assets/js/2.012ef3bf.js" as="script"><link rel="preload" href="/laravel/assets/js/1.fc484e49.js" as="script"><link rel="preload" href="/laravel/assets/js/74.09788358.js" as="script"><link rel="preload" href="/laravel/assets/js/6.9445a24e.js" as="script"><link rel="preload" href="/laravel/assets/js/21.51f8366a.js" as="script"><link rel="preload" href="/laravel/assets/js/4.be4b2b58.js" as="script"><link rel="prefetch" href="/laravel/assets/js/10.843a666e.js"><link rel="prefetch" href="/laravel/assets/js/11.fefc2105.js"><link rel="prefetch" href="/laravel/assets/js/12.726adfcd.js"><link rel="prefetch" href="/laravel/assets/js/13.93096b57.js"><link rel="prefetch" href="/laravel/assets/js/14.7daadba3.js"><link rel="prefetch" href="/laravel/assets/js/15.17ed1176.js"><link rel="prefetch" href="/laravel/assets/js/16.051a5bf2.js"><link rel="prefetch" href="/laravel/assets/js/17.2a74f087.js"><link rel="prefetch" href="/laravel/assets/js/18.9df2ad4f.js"><link rel="prefetch" href="/laravel/assets/js/19.84a42242.js"><link rel="prefetch" href="/laravel/assets/js/20.9a786f69.js"><link rel="prefetch" href="/laravel/assets/js/22.6a61d88f.js"><link rel="prefetch" href="/laravel/assets/js/23.dc4e0f7c.js"><link rel="prefetch" href="/laravel/assets/js/24.bb96479f.js"><link rel="prefetch" href="/laravel/assets/js/25.3f2634fe.js"><link rel="prefetch" href="/laravel/assets/js/26.f48004c6.js"><link rel="prefetch" href="/laravel/assets/js/28.9f7f72fe.js"><link rel="prefetch" href="/laravel/assets/js/29.b0d8a830.js"><link rel="prefetch" href="/laravel/assets/js/3.15026e0e.js"><link rel="prefetch" href="/laravel/assets/js/30.b929cee0.js"><link rel="prefetch" href="/laravel/assets/js/31.51e074be.js"><link rel="prefetch" href="/laravel/assets/js/32.f34ba1c4.js"><link rel="prefetch" href="/laravel/assets/js/33.268450e7.js"><link rel="prefetch" href="/laravel/assets/js/34.fb69e120.js"><link rel="prefetch" href="/laravel/assets/js/35.557d9b4a.js"><link rel="prefetch" href="/laravel/assets/js/36.be0a3ca9.js"><link rel="prefetch" href="/laravel/assets/js/37.3a1640cf.js"><link rel="prefetch" href="/laravel/assets/js/38.a5033ff6.js"><link rel="prefetch" href="/laravel/assets/js/39.a54f6137.js"><link rel="prefetch" href="/laravel/assets/js/40.3cdfa58f.js"><link rel="prefetch" href="/laravel/assets/js/41.18613918.js"><link rel="prefetch" href="/laravel/assets/js/42.0586dc38.js"><link rel="prefetch" href="/laravel/assets/js/43.924e5109.js"><link rel="prefetch" href="/laravel/assets/js/44.04519995.js"><link rel="prefetch" href="/laravel/assets/js/45.df4549a0.js"><link rel="prefetch" href="/laravel/assets/js/46.f6f25c33.js"><link rel="prefetch" href="/laravel/assets/js/47.30f91cfd.js"><link rel="prefetch" href="/laravel/assets/js/48.293c8f8e.js"><link rel="prefetch" href="/laravel/assets/js/49.2331d36c.js"><link rel="prefetch" href="/laravel/assets/js/5.10abb00e.js"><link rel="prefetch" href="/laravel/assets/js/50.bc47a6c0.js"><link rel="prefetch" href="/laravel/assets/js/51.eaab4e09.js"><link rel="prefetch" href="/laravel/assets/js/52.f7931b46.js"><link rel="prefetch" href="/laravel/assets/js/53.7a0065fd.js"><link rel="prefetch" href="/laravel/assets/js/54.aedc40e2.js"><link rel="prefetch" href="/laravel/assets/js/55.5ea08f30.js"><link rel="prefetch" href="/laravel/assets/js/56.417f9c51.js"><link rel="prefetch" href="/laravel/assets/js/57.3907f67f.js"><link rel="prefetch" href="/laravel/assets/js/58.e3aa685a.js"><link rel="prefetch" href="/laravel/assets/js/59.181ffe7e.js"><link rel="prefetch" href="/laravel/assets/js/60.b147ec0d.js"><link rel="prefetch" href="/laravel/assets/js/61.6c44824f.js"><link rel="prefetch" href="/laravel/assets/js/62.bfcb25d2.js"><link rel="prefetch" href="/laravel/assets/js/63.32c29edf.js"><link rel="prefetch" href="/laravel/assets/js/64.ab5f4882.js"><link rel="prefetch" href="/laravel/assets/js/65.1a955070.js"><link rel="prefetch" href="/laravel/assets/js/66.2fe1ac8e.js"><link rel="prefetch" href="/laravel/assets/js/67.37a005c7.js"><link rel="prefetch" href="/laravel/assets/js/68.9831e33a.js"><link rel="prefetch" href="/laravel/assets/js/69.b9c98f6e.js"><link rel="prefetch" href="/laravel/assets/js/7.06a52253.js"><link rel="prefetch" href="/laravel/assets/js/70.97ebd365.js"><link rel="prefetch" href="/laravel/assets/js/71.9792c4b7.js"><link rel="prefetch" href="/laravel/assets/js/72.6d806f8c.js"><link rel="prefetch" href="/laravel/assets/js/73.cafcc362.js"><link rel="prefetch" href="/laravel/assets/js/75.b59cc290.js"><link rel="prefetch" href="/laravel/assets/js/76.68368659.js"><link rel="prefetch" href="/laravel/assets/js/77.9b44ff2e.js"><link rel="prefetch" href="/laravel/assets/js/78.6acdab42.js"><link rel="prefetch" href="/laravel/assets/js/79.bb5d40cb.js"><link rel="prefetch" href="/laravel/assets/js/8.ac39699a.js"><link rel="prefetch" href="/laravel/assets/js/80.ba465d38.js"><link rel="prefetch" href="/laravel/assets/js/81.07fd19fa.js"><link rel="prefetch" href="/laravel/assets/js/82.3a18b7b8.js"><link rel="prefetch" href="/laravel/assets/js/83.ca1c3164.js"><link rel="prefetch" href="/laravel/assets/js/84.b50c1887.js"><link rel="prefetch" href="/laravel/assets/js/85.76aed14d.js"><link rel="prefetch" href="/laravel/assets/js/86.6221ef47.js"><link rel="prefetch" href="/laravel/assets/js/9.f3abf893.js">
    <link rel="stylesheet" href="/laravel/assets/css/0.styles.927314a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="navbar-item"><div class="sidebar-button"><svg fill="currentColor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg" class="sidebar-icon sidebar-closing-icon"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"></path> <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"></path></svg> <svg fill="currentColor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg" class="sidebar-icon sidebar-opening-icon"><path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path></svg></div></div> <a href="/laravel/" class="navbar-item home-link router-link-active"><img src="https://www.gdm.gent/vuepress-theme-artevelde/artevelde__icon--white.svg" alt="Advanced Development &amp; Laravel" class="logo"> <span class="site-name">Advanced Development &amp; Laravel</span></a> <div class="search-box navbar-item"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links navbar-item can-hide"><div class="nav-item"><a href="/laravel/concepts/" class="nav-link">Basisconcepten</a></div><div class="nav-item"><a href="/laravel/laravel/" class="nav-link router-link-active">Laravel</a></div><div class="nav-item"><a href="/laravel/mailing/" class="nav-link">Mailing</a></div><div class="nav-item"><a href="/laravel/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Taal</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/laravel/laravel/databases/eloquent.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Nederlands</a></li><li class="dropdown-item"><!----> <a href="/laravel/en/" class="nav-link">English</a></li></ul></div></div> <!----> <!----></nav></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/laravel/concepts/" class="nav-link">Basisconcepten</a></div><div class="nav-item"><a href="/laravel/laravel/" class="nav-link router-link-active">Laravel</a></div><div class="nav-item"><a href="/laravel/mailing/" class="nav-link">Mailing</a></div><div class="nav-item"><a href="/laravel/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Taal</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/laravel/laravel/databases/eloquent.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Nederlands</a></li><li class="dropdown-item"><!----> <a href="/laravel/en/" class="nav-link">English</a></li></ul></div></div> <!----> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/laravel/laravel/" class="router-link-active sidebar-heading clickable open"><span>Laravel MVC Framework</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group depth-1 collapsable is-sub-group"><a href="/laravel/laravel/basics/" class="sidebar-heading clickable"><span>De basis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-1 collapsable is-sub-group"><a href="/laravel/laravel/databases/" class="router-link-active sidebar-heading clickable open"><span>Werken met een database</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel/laravel/databases/connecting.html" class="sidebar-link">Verbinden met een database</a></li><li><a href="/laravel/laravel/databases/migrations.html" class="sidebar-link">Migrations</a></li><li><a href="/laravel/laravel/databases/seeding.html" class="sidebar-link">Database seeding</a></li><li><a href="/laravel/laravel/databases/eloquent.html" aria-current="page" class="active sidebar-link">Querying data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel/laravel/databases/eloquent.html#querybuilder" class="sidebar-link">Querybuilder</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/databases/eloquent.html#eloquent-orm" class="sidebar-link">Eloquent ORM</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/databases/eloquent.html#basis" class="sidebar-link">Basis</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/databases/eloquent.html#query-opbouwen" class="sidebar-link">Query opbouwen</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/databases/eloquent.html#aanmaken-van-nieuwe-records" class="sidebar-link">Aanmaken van nieuwe records</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/databases/eloquent.html#record-aanpassen" class="sidebar-link">Record aanpassen</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/databases/eloquent.html#verwijderen" class="sidebar-link">Verwijderen</a></li></ul></li><li><a href="/laravel/laravel/databases/relations.html" class="sidebar-link">Relaties</a></li></ul></section></li><li><section class="sidebar-group depth-1 collapsable is-sub-group"><a href="/laravel/laravel/advanced/" class="sidebar-heading clickable"><span>Dieper in op Laravel</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-1 collapsable is-sub-group"><a href="/laravel/laravel/how-to/" class="sidebar-heading clickable"><span>How to</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="querying-data"><a href="#querying-data" class="header-anchor">#</a> Querying data</h1> <p>Bij Laravel kunnen we sql queries uitvoeren via de select method. In de eerste parameter plaatsen we de SQL Query. De 2e parameter array kunnen we gebruiken om variabelen te binden om sqlInjection te voorkomen.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$projects</span> <span class="token operator">=</span> <span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">select</span><span class="token punctuation">(</span> <span class="token string double-quoted-string">&quot;SELECT * FROM projects&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">dd</span><span class="token punctuation">(</span><span class="token variable">$projects</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="querybuilder"><a href="#querybuilder" class="header-anchor">#</a> Querybuilder</h2> <p>Bij SQL moeten we een goede kennis hebben van SQL. Daarom heeft Laravel er ook voor gezorgd dat we de querybuilder kunnen gebruiken. Hiermee bouwen we een query op aan de hand van verschillende methods. Voordeel is vooral dat we hier dynamischer mee kunnen omgaan en dat de volgorde niet zo belangrijk is.</p> <p>Het voorbeeld van hierboven kunnen we ook schrijven als:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$projects</span> <span class="token operator">=</span> <span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'projects'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'*'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">dd</span><span class="token punctuation">(</span><span class="token variable">$projects</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>We hebben dus nog steeds de basis kennis nodig van sql maar kunnen vertrouwen dat Laravel deze correct zal schrijven. Een uitgebreider voorbeeld zou kunnen zijn:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$querybuilder</span> <span class="token operator">=</span> <span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'projects'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'customer'</span><span class="token punctuation">,</span> <span class="token variable">$customer</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'search'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$search</span> <span class="token operator">=</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'search'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//if a searchquery is available in the request -&gt; filter on projects</span>
    <span class="token variable">$querybuilder</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'LIKE'</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;%<span class="token interpolation"><span class="token variable">$search</span></span>%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$projects</span> <span class="token operator">=</span> <span class="token variable">$querybuilder</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">dd</span><span class="token punctuation">(</span><span class="token variable">$projects</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Het resultaat van deze queries zijn steeds standaard objecten of array’s van standaard objecten.</p> <h2 id="eloquent-orm"><a href="#eloquent-orm" class="header-anchor">#</a> Eloquent ORM</h2> <p>Omdat we binnen een MVC willen werken met models heeft Laravel ook een ORM voorzien. Deze zorgt er dan voor dat het resultaat van een query omgevormd wordt naar de juiste model (bv <code>Project</code>);</p> <blockquote><p>Laravel maakt gebruik van een <em>Object-relational mapper (ORM)</em> om eenvoudig interactie te hebben met de database. Een ORM vertaalt relationele data om naar object georiënteerde programma code. Dit om het schrijven van SQL statements te vereenvoudigen en de kans op SQL-injecties te verkleinen. ( je kan dit vergelijken met <code>TypeORM</code> or <code>Prisma</code> binnen Node.js)</p></blockquote> <h2 id="basis"><a href="#basis" class="header-anchor">#</a> Basis</h2> <p>Standaard wordt ieder Model uitgerust met de methods die gebruik maken van dit ORM. Het ORM zorgt er dus voor dat database records worden omgevormd naar Objecten die we kunnen gebruiken.</p> <p>Zo hebben we reeds de methods <code>all()</code> en <code>find()</code> gezien bij de introductie:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">//Alle records ophalen</span>
<span class="token variable">$projects</span> <span class="token operator">=</span> <span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$projects</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Het vak ophalen met primary key 1</span>
<span class="token variable">$project</span> <span class="token operator">=</span> <span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$project</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Uiteraard zullen applicaties gebruik maken van meer uitdagende SQL queries om data op te halen.</p> <h2 id="query-opbouwen"><a href="#query-opbouwen" class="header-anchor">#</a> Query opbouwen</h2> <p>Een query opbouwen kan je vergelijken met het schrijven van een sql query. Het grootste verschil is vooral dat de volgorde bij SQL altijd gerespecteerd moet worden. Maar bij het opbouwen via de Eloquent ORM is dat niet meer van belang. Hoewel het me logisch en leesbaar lijkt om dit nog steeds te behouden.</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> projects 
<span class="token keyword">WHERE</span> publish <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> company_id <span class="token operator">=</span> <span class="token number">4</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> name <span class="token keyword">ASC</span>
<span class="token keyword">LIMIT</span> <span class="token number">20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Als we bovenstaande SQL statement in Laravel willen opbouwen via een Model <code>Project</code> dan zal dit als volgt gebeuren.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$projects</span> <span class="token operator">=</span> <span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'company_id'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'DESC'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Indien je queries moet uitvoeren dat ruimer zijn dan 1 model of indien er geen model is kan je ook de <code>DB</code> Model gebruiken hiervoor</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$projects</span> <span class="token operator">=</span> <span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'projects'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'company_id'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'DESC'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><a href="https://laravel.com/docs/10.x/queries#limit-and-offset" target="_blank" rel="noopener noreferrer">Een volledig overzicht van de mogelijkheden kan je terugvinden op de Laravel handleiding<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="aanmaken-van-nieuwe-records"><a href="#aanmaken-van-nieuwe-records" class="header-anchor">#</a> Aanmaken van nieuwe records</h2> <p>Via de models kan je ook eenvoudig een nieuw record aanmaken in de database.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$project</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Project</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'My new project'</span><span class="token punctuation">;</span>
<span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token property">description</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Full description of the project...'</span><span class="token punctuation">;</span>
<span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token property">publish</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token property">customer_id</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="record-aanpassen"><a href="#record-aanpassen" class="header-anchor">#</a> Record aanpassen</h2> <p>Hetzelfde kunnen we doen voor het aanpassen van een record.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$project</span> <span class="token operator">=</span> <span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token property">customer_id</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="verwijderen"><a href="#verwijderen" class="header-anchor">#</a> Verwijderen</h2> <p>Het verwijderen van 1 record komt overeen met het wijzigen, maar uiteraard met gebruik van de delete method.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$project</span> <span class="token operator">=</span> <span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Of korter geschreven</span>
<span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Je kan ook meerdere records dat voldoen aan een zoekopdracht in 1 actie verwijderen.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">//Alle projecten van klant met id 4 uit de database verwijderen</span>
<span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'customer_id'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Let op!</strong> Bij het verwijderen van records zijn die ook meteen verdwenen. Een soort prullenmand bestaat niet echt binnen MySQL.</p></div> <div class="page-nav"><div class="inner"><a href="/laravel/laravel/databases/seeding.html" class="btn btn-left" data-v-67075f4c><svg fill="currentColor" class="icon bi" data-v-5390759e data-v-67075f4c><use xlink:href="/laravel/assets/img/bootstrap-icons.386691c2.svg#arrow-left" data-v-5390759e></use></svg> Database seeding <!----></a> <a href="/laravel/laravel/databases/relations.html" class="btn btn-right" data-v-67075f4c><!----> Relaties <svg fill="currentColor" class="icon bi" data-v-5390759e data-v-67075f4c><use xlink:href="/laravel/assets/img/bootstrap-icons.386691c2.svg#arrow-right" data-v-5390759e></use></svg></a></div></div> <footer class="page-edit"><span class="copyright">© 2024 Arteveldehogeschool</span> <span class="last-updated"><span class="prefix">Laatst bijgewerkt:</span> <span class="time">12/12/2023 08:13:24</span></span> <!----></footer> </main></div><div class="global-ui"></div></div>
    <script src="/laravel/assets/js/app.1385f630.js" defer></script><script src="/laravel/assets/js/2.012ef3bf.js" defer></script><script src="/laravel/assets/js/1.fc484e49.js" defer></script><script src="/laravel/assets/js/74.09788358.js" defer></script><script src="/laravel/assets/js/6.9445a24e.js" defer></script><script src="/laravel/assets/js/21.51f8366a.js" defer></script><script src="/laravel/assets/js/4.be4b2b58.js" defer></script>
  </body>
</html>
